<!DOCTYPE html>
<html>
<head>
    <title>Learning Datastar</title>
    <script type="module" src="https://cdn.jsdelivr.net/gh/starfederation/datastar@v1.0.0-RC.6/bundles/datastar.js"></script>
    <style>
        body {
            font-family: monospace;
            max-width: 800px;
            margin: 2rem auto;
            padding: 0 1rem;
        }
        button {
            padding: 0.5rem 1rem;
            margin: 0.5rem;
        }
    </style>
</head>
<body data-signals='{"sessionId": "", "prompt": "", "response": "", "loading": false}'>
    <h1>Datastar + OpenCode</h1>

    <div data-show="!$sessionId">
        <button data-on:click="@post('/create-session')">Create Session</button>
    </div>

    <div data-show="$sessionId">
        <p>Session: <code data-text="$sessionId"></code></p>

        <input
            type="text"
            data-bind="prompt"
            placeholder="Enter your prompt..."
            style="padding: 0.5rem; font-size: 1rem; width: 100%; margin-bottom: 0.5rem;">

        <button
            data-on:click="@post('/send-prompt')"
            data-attr:disabled="$loading">
            <span data-show="!$loading">Send</span>
            <span data-show="$loading">Sending...</span>
        </button>

        <h2>Response</h2>
        <div style="background: #f0f0f0; padding: 1rem; border-radius: 4px; white-space: pre-wrap; min-height: 3rem;"
             data-text="$response || 'No response yet...'"></div>
    </div>
</body>
</html>
